<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="CityTour.StoryCanvasPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Padding="16">

    <Grid RowDefinitions="Auto,Auto,Auto,Auto,*,Auto,Auto,Auto,Auto" RowSpacing="12">

        <Label Text="New story"
               FontSize="22"
               FontAttributes="Bold" />

        <Label x:Name="BuildingNameLabel"
               Grid.Row="1"
               FontSize="14"
               LineBreakMode="WordWrap"
               TextColor="{AppThemeBinding Light=#666, Dark=#AAA}" />

        <StackLayout Grid.Row="2"
                     Spacing="4">
            <Label Text="Story focus"
                   FontAttributes="Bold"
                   FontSize="14" />
            <Picker x:Name="CategoryPicker"
                    Title="Choose a category"
                    SelectedIndexChanged="OnCategoryChanged" />
        </StackLayout>

        <Grid Grid.Row="3"
              ColumnDefinitions="Auto,*"
              ColumnSpacing="8">
            <ActivityIndicator x:Name="LoadingIndicator"
                                VerticalOptions="Center"
                                IsVisible="False"
                                IsRunning="False" />
            <Label x:Name="StatusLabel"
                   VerticalOptions="Center"
                   LineBreakMode="WordWrap"
                   TextColor="{AppThemeBinding Light=#555, Dark=#CCC}" />
        </Grid>

        <Editor x:Name="StoryEditor"
                Grid.Row="4"
                Placeholder="Tweak or add your own notes here..."
                AutoSize="TextChanges" />

        <StackLayout Grid.Row="5"
                     Spacing="4">
            <Label Text="Voice"
                   FontAttributes="Bold"
                   FontSize="14" />
            <Picker x:Name="VoicePicker"
                    Title="Choose a voice"
                    ItemDisplayBinding="{Binding DisplayName}" />
        </StackLayout>

        <Grid Grid.Row="6"
              ColumnDefinitions="*,*"
              ColumnSpacing="8">
            <Button x:Name="ListenButton"
                    Text="Listen"
                    Clicked="OnListenClicked" />
            <Button x:Name="StopButton"
                    Grid.Column="1"
                    Text="Stop"
                    IsEnabled="False"
                    Clicked="OnStopClicked" />
        </Grid>

        <Button x:Name="RegenerateButton"
                Grid.Row="7"
                Text="Regenerate story"
                Clicked="OnRegenerateClicked" />

        <Button Grid.Row="8"
                Text="Close"
                Clicked="OnCloseClicked" />
    </Grid>
</ContentPage>
